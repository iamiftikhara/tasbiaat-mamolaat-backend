{
	"info": {
		"_postman_id": "a8f5e3c7-6d2e-4b9c-8a1d-f3e7c8d9a0b1",
		"name": "Tasbiaat Mamolaat API Tests",
		"description": "Collection for testing the Tasbiaat Mamolaat Backend API endpoints",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"yourpassword\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Authenticate user and get access token"
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/logout",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"logout"
							]
						},
						"description": "Logout and invalidate current session"
					},
					"response": []
				},
				{
					"name": "Logout All Sessions",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/logout-all",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"logout-all"
							]
						},
						"description": "Logout from all active sessions"
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/refresh",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"refresh"
							]
						},
						"description": "Get new access token using refresh token"
					},
					"response": []
				},
				{
					"name": "Get Current User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/me",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"me"
							]
						},
						"description": "Get current authenticated user information"
					},
					"response": []
				},
				{
					"name": "List Sessions",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/sessions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"sessions"
							]
						},
						"description": "List all active sessions for current user"
					},
					"response": []
				},
				{
					"name": "Revoke Session",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/sessions/{{session_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"sessions",
								"{{session_id}}"
							]
						},
						"description": "Revoke a specific session"
					},
					"response": []
				},
				{
					"name": "Change Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"current_password\": \"currentpassword\",\n  \"new_password\": \"newpassword\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/change-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"change-password"
							]
						},
						"description": "Change user password"
					},
					"response": []
				},
				{
					"name": "Verify Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/verify",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"verify"
							]
						},
						"description": "Verify if token is valid"
					},
					"response": []
				}
			],
			"description": "Authentication related endpoints"
		},
		{
			"name": "User Management",
			"item": [
				{
					"name": "Create User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"New User\",\n  \"email\": \"newuser@example.com\",\n  \"phone\": \"1234567890\",\n  \"password\": \"securepassword\",\n  \"role\": \"Saalik\",\n  \"level\": \"1\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						},
						"description": "Create a new user"
					},
					"response": []
				},
				{
					"name": "List Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/users?role=Saalik&page=1&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							],
							"query": [
								{
									"key": "role",
									"value": "Saalik"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						},
						"description": "List users with filtering options"
					},
					"response": []
				},
				{
					"name": "Get User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{user_id}}"
							]
						},
						"description": "Get specific user details"
					},
					"response": []
				},
				{
					"name": "Update User",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Name\",\n  \"email\": \"updated@example.com\",\n  \"level\": \"2\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{user_id}}"
							]
						},
						"description": "Update user information"
					},
					"response": []
				}
			],
			"description": "User management endpoints"
		},
		{
			"name": "Entries",
			"item": [
				{
					"name": "Create Entry",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"date\": \"2024-07-15\",\n  \"tasbihat\": {\n    \"morning\": 100,\n    \"evening\": 100\n  },\n  \"mamolaat\": {\n    \"tahajjud\": true,\n    \"ishraq\": true,\n    \"duha\": true,\n    \"awwabin\": true\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/entries",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"entries"
							]
						},
						"description": "Create or update daily entry"
					},
					"response": []
				},
				{
					"name": "List Entries",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/entries?start_date=2024-07-01&end_date=2024-07-15&user_id={{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"entries"
							],
							"query": [
								{
									"key": "start_date",
									"value": "2024-07-01"
								},
								{
									"key": "end_date",
									"value": "2024-07-15"
								},
								{
									"key": "user_id",
									"value": "{{user_id}}"
								}
							]
						},
						"description": "List entries with filtering options"
					},
					"response": []
				},
				{
					"name": "Get Entry",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/entries/{{entry_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"entries",
								"{{entry_id}}"
							]
						},
						"description": "Get specific entry details"
					},
					"response": []
				},
				{
					"name": "Add Comment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"comment\": \"Great progress on your spiritual practices this week!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/entries/{{entry_id}}/comment",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"entries",
								"{{entry_id}}",
								"comment"
							]
						},
						"description": "Add comment to entry"
					},
					"response": []
				}
			],
			"description": "Entries management endpoints"
		},
		{
			"name": "Reports",
			"item": [
				{
					"name": "Weekly Report",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/reports/weekly?week_offset=0&user_id={{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reports",
								"weekly"
							],
							"query": [
								{
									"key": "week_offset",
									"value": "0"
								},
								{
									"key": "user_id",
									"value": "{{user_id}}"
								}
							]
						},
						"description": "Generate weekly report"
					},
					"response": []
				},
				{
					"name": "Monthly Report",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/reports/monthly?month_offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reports",
								"monthly"
							],
							"query": [
								{
									"key": "month_offset",
									"value": "0"
								}
							]
						},
						"description": "Generate monthly report"
					},
					"response": []
				}
			],
			"description": "Report generation endpoints"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-extract tokens from login response",
					"if (pm.response.code === 200 && pm.info.requestName === \"Login\") {",
					"    var jsonData = pm.response.json();",
					"    if (jsonData.data && jsonData.data.tokens) {",
					"        pm.environment.set(\"access_token\", jsonData.data.tokens.access_token);",
					"        pm.environment.set(\"refresh_token\", jsonData.data.tokens.refresh_token);",
					"        console.log(\"Tokens extracted and saved to environment\");",
					"    }",
					"}",
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://zikar-bd.vercel.app/api/v1",
			"type": "string"
		}
	]
}